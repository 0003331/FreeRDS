
cmake_minimum_required(VERSION 2.8)

project(x11rdp C)

include(ExternalProject)

set(X11RDP_PREFIX "/opt/X11rdp")

set(EXTERNAL_PROJECT "python")
set(${EXTERNAL_PROJECT}_NAME "Python-2.7")
set(${EXTERNAL_PROJECT}_EXT ".tar.bz2")
set(${EXTERNAL_PROJECT}_FILE "${${EXTERNAL_PROJECT}_NAME}${${EXTERNAL_PROJECT}_EXT}")
set(${EXTERNAL_PROJECT}_URL "http://www.python.org/ftp/python/2.7/${${EXTERNAL_PROJECT}_FILE}")
set(EXTERNAL_PROJECTS ${EXTERNAL_PROJECTS} ${EXTERNAL_PROJECT})

set(EXTERNAL_PROJECT "util-macros")
set(${EXTERNAL_PROJECT}_NAME "util-macros-1.11.0")
set(${EXTERNAL_PROJECT}_EXT ".tar.bz2")
set(${EXTERNAL_PROJECT}_FILE "${${EXTERNAL_PROJECT}_NAME}${${EXTERNAL_PROJECT}_EXT}")
set(${EXTERNAL_PROJECT}_URL "http://cgit.freedesktop.org/xorg/util/macros/snapshot/${${EXTERNAL_PROJECT}_FILE}")
set(EXTERNAL_PROJECTS ${EXTERNAL_PROJECTS} ${EXTERNAL_PROJECT})

set(EXTERNAL_PROJECT "xf86driproto")
set(${EXTERNAL_PROJECT}_NAME "xf86driproto-2.1.0")
set(${EXTERNAL_PROJECT}_EXT ".tar.bz2")
set(${EXTERNAL_PROJECT}_FILE "${${EXTERNAL_PROJECT}_NAME}${${EXTERNAL_PROJECT}_EXT}")
set(${EXTERNAL_PROJECT}_URL "http://www.x.org/releases/X11R7.6/src/proto/${${EXTERNAL_PROJECT}_FILE}")
set(EXTERNAL_PROJECTS ${EXTERNAL_PROJECTS} ${EXTERNAL_PROJECT})

set(EXTERNAL_PROJECT "dri2proto")
set(${EXTERNAL_PROJECT}_NAME "dri2proto-2.3")
set(${EXTERNAL_PROJECT}_EXT ".tar.bz2")
set(${EXTERNAL_PROJECT}_FILE "${${EXTERNAL_PROJECT}_NAME}${${EXTERNAL_PROJECT}_EXT}")
set(${EXTERNAL_PROJECT}_URL "http://www.x.org/releases/X11R7.6/src/proto/${${EXTERNAL_PROJECT}_FILE}")
set(EXTERNAL_PROJECTS ${EXTERNAL_PROJECTS} ${EXTERNAL_PROJECT})

set(EXTERNAL_PROJECT "glproto")
set(${EXTERNAL_PROJECT}_NAME "glproto-1.4.12")
set(${EXTERNAL_PROJECT}_EXT ".tar.bz2")
set(${EXTERNAL_PROJECT}_FILE "${${EXTERNAL_PROJECT}_NAME}${${EXTERNAL_PROJECT}_EXT}")
set(${EXTERNAL_PROJECT}_URL "http://www.x.org/releases/X11R7.6/src/proto/${${EXTERNAL_PROJECT}_FILE}")
set(EXTERNAL_PROJECTS ${EXTERNAL_PROJECTS} ${EXTERNAL_PROJECT})

set(EXTERNAL_PROJECT "libpciaccess")
set(${EXTERNAL_PROJECT}_NAME "libpciaccess-0.12.0")
set(${EXTERNAL_PROJECT}_EXT ".tar.bz2")
set(${EXTERNAL_PROJECT}_FILE "${${EXTERNAL_PROJECT}_NAME}${${EXTERNAL_PROJECT}_EXT}")
set(${EXTERNAL_PROJECT}_URL "http://cgit.freedesktop.org/xorg/lib/libpciaccess/snapshot/${${EXTERNAL_PROJECT}_FILE}")
set(EXTERNAL_PROJECTS ${EXTERNAL_PROJECTS} ${EXTERNAL_PROJECT})

set(EXTERNAL_PROJECT "libpthread-stubs")
set(${EXTERNAL_PROJECT}_NAME "libpthread-stubs-0.3")
set(${EXTERNAL_PROJECT}_EXT ".tar.bz2")
set(${EXTERNAL_PROJECT}_FILE "${${EXTERNAL_PROJECT}_NAME}${${EXTERNAL_PROJECT}_EXT}")
set(${EXTERNAL_PROJECT}_URL "http://xcb.freedesktop.org/dist/${${EXTERNAL_PROJECT}_FILE}")
set(EXTERNAL_PROJECTS ${EXTERNAL_PROJECTS} ${EXTERNAL_PROJECT})

set(EXTERNAL_PROJECT "libdrm")
set(${EXTERNAL_PROJECT}_NAME "libdrm-2.4.26")
set(${EXTERNAL_PROJECT}_EXT ".tar.bz2")
set(${EXTERNAL_PROJECT}_FILE "${${EXTERNAL_PROJECT}_NAME}${${EXTERNAL_PROJECT}_EXT}")
set(${EXTERNAL_PROJECT}_URL "http://dri.freedesktop.org/libdrm/${${EXTERNAL_PROJECT}_FILE}")
set(EXTERNAL_PROJECTS ${EXTERNAL_PROJECTS} ${EXTERNAL_PROJECT})

set(EXTERNAL_PROJECT "damageproto")
set(${EXTERNAL_PROJECT}_NAME "damageproto-1.2.1")
set(${EXTERNAL_PROJECT}_EXT ".tar.bz2")
set(${EXTERNAL_PROJECT}_FILE "${${EXTERNAL_PROJECT}_NAME}${${EXTERNAL_PROJECT}_EXT}")
set(${EXTERNAL_PROJECT}_URL "http://ftp.x.org/pub/individual/proto/${${EXTERNAL_PROJECT}_FILE}")
set(EXTERNAL_PROJECTS ${EXTERNAL_PROJECTS} ${EXTERNAL_PROJECT})

set(EXTERNAL_PROJECT "makedepend")
set(${EXTERNAL_PROJECT}_NAME "makedepend-1.0.3")
set(${EXTERNAL_PROJECT}_EXT ".tar.bz2")
set(${EXTERNAL_PROJECT}_FILE "${${EXTERNAL_PROJECT}_NAME}${${EXTERNAL_PROJECT}_EXT}")
set(${EXTERNAL_PROJECT}_URL "http://xorg.freedesktop.org/releases/individual/util/${${EXTERNAL_PROJECT}_FILE}")
set(EXTERNAL_PROJECTS ${EXTERNAL_PROJECTS} ${EXTERNAL_PROJECT})

set(EXTERNAL_PROJECT "libxml2")
set(${EXTERNAL_PROJECT}_NAME "libxml2-2.7.8")
set(${EXTERNAL_PROJECT}_EXT ".tar.gz")
set(${EXTERNAL_PROJECT}_FILE "${${EXTERNAL_PROJECT}_NAME}${${EXTERNAL_PROJECT}_EXT}")
set(${EXTERNAL_PROJECT}_URL "ftp://ftp.xmlsoft.org/libxml2/${${EXTERNAL_PROJECT}_FILE}")
set(EXTERNAL_PROJECTS ${EXTERNAL_PROJECTS} ${EXTERNAL_PROJECT})

set(EXTERNAL_PROJECT "libpng")
set(${EXTERNAL_PROJECT}_NAME "libpng-1.2.46")
set(${EXTERNAL_PROJECT}_EXT ".tar.bz2")
set(${EXTERNAL_PROJECT}_FILE "${${EXTERNAL_PROJECT}_NAME}${${EXTERNAL_PROJECT}_EXT}")
set(${EXTERNAL_PROJECT}_URL "http://server1.xrdp.org/xrdp/${${EXTERNAL_PROJECT}_FILE}")
set(EXTERNAL_PROJECTS ${EXTERNAL_PROJECTS} ${EXTERNAL_PROJECT})

set(EXTERNAL_PROJECT "pixman")
set(${EXTERNAL_PROJECT}_NAME "pixman-0.15.20")
set(${EXTERNAL_PROJECT}_EXT ".tar.bz2")
set(${EXTERNAL_PROJECT}_FILE "${${EXTERNAL_PROJECT}_NAME}${${EXTERNAL_PROJECT}_EXT}")
set(${EXTERNAL_PROJECT}_URL "http://ftp.x.org/pub/individual/lib/${${EXTERNAL_PROJECT}_FILE}")
set(EXTERNAL_PROJECTS ${EXTERNAL_PROJECTS} ${EXTERNAL_PROJECT})

set(EXTERNAL_PROJECT "freetype")
set(${EXTERNAL_PROJECT}_NAME "freetype-2.4.6")
set(${EXTERNAL_PROJECT}_EXT ".tar.bz2")
set(${EXTERNAL_PROJECT}_FILE "${${EXTERNAL_PROJECT}_NAME}${${EXTERNAL_PROJECT}_EXT}")
set(${EXTERNAL_PROJECT}_URL "http://download.savannah.gnu.org/releases/freetype/${${EXTERNAL_PROJECT}_FILE}")
set(EXTERNAL_PROJECTS ${EXTERNAL_PROJECTS} ${EXTERNAL_PROJECT})

set(EXTERNAL_PROJECT "fontconfig")
set(${EXTERNAL_PROJECT}_NAME "fontconfig-2.8.0")
set(${EXTERNAL_PROJECT}_EXT ".tar.gz")
set(${EXTERNAL_PROJECT}_FILE "${${EXTERNAL_PROJECT}_NAME}${${EXTERNAL_PROJECT}_EXT}")
set(${EXTERNAL_PROJECT}_URL "http://server1.xrdp.org/xrdp/${${EXTERNAL_PROJECT}_FILE}")
set(EXTERNAL_PROJECTS ${EXTERNAL_PROJECTS} ${EXTERNAL_PROJECT})

set(EXTERNAL_PROJECT "cairo")
set(${EXTERNAL_PROJECT}_NAME "cairo-1.8.8")
set(${EXTERNAL_PROJECT}_EXT ".tar.gz")
set(${EXTERNAL_PROJECT}_FILE "${${EXTERNAL_PROJECT}_NAME}${${EXTERNAL_PROJECT}_EXT}")
set(${EXTERNAL_PROJECT}_URL "http://server1.xrdp.org/xrdp/${${EXTERNAL_PROJECT}_FILE}")
set(EXTERNAL_PROJECTS ${EXTERNAL_PROJECTS} ${EXTERNAL_PROJECT})

set(EXTERNAL_PROJECT "expat")
set(${EXTERNAL_PROJECT}_NAME "expat-2.0.1")
set(${EXTERNAL_PROJECT}_EXT ".tar.gz")
set(${EXTERNAL_PROJECT}_FILE "${${EXTERNAL_PROJECT}_NAME}${${EXTERNAL_PROJECT}_EXT}")
set(${EXTERNAL_PROJECT}_URL "http://server1.xrdp.org/xrdp/${${EXTERNAL_PROJECT}_FILE}")
set(EXTERNAL_PROJECTS ${EXTERNAL_PROJECTS} ${EXTERNAL_PROJECT})

set(EXTERNAL_PROJECT "xextproto")
set(${EXTERNAL_PROJECT}_NAME "xextproto-7.1.2")
set(${EXTERNAL_PROJECT}_EXT ".tar.bz2")
set(${EXTERNAL_PROJECT}_FILE "${${EXTERNAL_PROJECT}_NAME}${${EXTERNAL_PROJECT}_EXT}")
set(${EXTERNAL_PROJECT}_URL "http://xorg.freedesktop.org/releases/individual/proto/${${EXTERNAL_PROJECT}_FILE}")
set(EXTERNAL_PROJECTS ${EXTERNAL_PROJECTS} ${EXTERNAL_PROJECT})

set(EXTERNAL_PROJECT "xproto")
set(${EXTERNAL_PROJECT}_NAME "xproto-7.0.20")
set(${EXTERNAL_PROJECT}_EXT ".tar.bz2")
set(${EXTERNAL_PROJECT}_FILE "${${EXTERNAL_PROJECT}_NAME}${${EXTERNAL_PROJECT}_EXT}")
set(${EXTERNAL_PROJECT}_URL "http://xorg.freedesktop.org/releases/individual/proto/${${EXTERNAL_PROJECT}_FILE}")
set(EXTERNAL_PROJECTS ${EXTERNAL_PROJECTS} ${EXTERNAL_PROJECT})

set(EXTERNAL_PROJECT "xcb-proto")
set(${EXTERNAL_PROJECT}_NAME "xcb-proto-1.6")
set(${EXTERNAL_PROJECT}_EXT ".tar.bz2")
set(${EXTERNAL_PROJECT}_FILE "${${EXTERNAL_PROJECT}_NAME}${${EXTERNAL_PROJECT}_EXT}")
set(${EXTERNAL_PROJECT}_URL "http://xcb.freedesktop.org/dist/${${EXTERNAL_PROJECT}_FILE}")
set(EXTERNAL_PROJECTS ${EXTERNAL_PROJECTS} ${EXTERNAL_PROJECT})

set(EXTERNAL_PROJECT "libxcb")
set(${EXTERNAL_PROJECT}_NAME "libxcb-1.7")
set(${EXTERNAL_PROJECT}_EXT ".tar.bz2")
set(${EXTERNAL_PROJECT}_FILE "${${EXTERNAL_PROJECT}_NAME}${${EXTERNAL_PROJECT}_EXT}")
set(${EXTERNAL_PROJECT}_URL "http://xcb.freedesktop.org/dist/${${EXTERNAL_PROJECT}_FILE}")
set(EXTERNAL_PROJECTS ${EXTERNAL_PROJECTS} ${EXTERNAL_PROJECT})

set(EXTERNAL_PROJECT "xtrans")
set(${EXTERNAL_PROJECT}_NAME "xtrans-1.2.6")
set(${EXTERNAL_PROJECT}_EXT ".tar.bz2")
set(${EXTERNAL_PROJECT}_FILE "${${EXTERNAL_PROJECT}_NAME}${${EXTERNAL_PROJECT}_EXT}")
set(${EXTERNAL_PROJECT}_URL "http://ftp.x.org/pub/individual/lib/${${EXTERNAL_PROJECT}_FILE}")
set(EXTERNAL_PROJECTS ${EXTERNAL_PROJECTS} ${EXTERNAL_PROJECT})

set(EXTERNAL_PROJECT "libX11")
set(${EXTERNAL_PROJECT}_NAME "libX11-1.4.0")
set(${EXTERNAL_PROJECT}_EXT ".tar.bz2")
set(${EXTERNAL_PROJECT}_FILE "${${EXTERNAL_PROJECT}_NAME}${${EXTERNAL_PROJECT}_EXT}")
set(${EXTERNAL_PROJECT}_URL "http://ftp.x.org/pub/individual/lib/${${EXTERNAL_PROJECT}_FILE}")
set(EXTERNAL_PROJECTS ${EXTERNAL_PROJECTS} ${EXTERNAL_PROJECT})

set(EXTERNAL_PROJECT "libXext")
set(${EXTERNAL_PROJECT}_NAME "libXext-1.2.0")
set(${EXTERNAL_PROJECT}_EXT ".tar.bz2")
set(${EXTERNAL_PROJECT}_FILE "${${EXTERNAL_PROJECT}_NAME}${${EXTERNAL_PROJECT}_EXT}")
set(${EXTERNAL_PROJECT}_URL "http://ftp.x.org/pub/individual/lib/${${EXTERNAL_PROJECT}_FILE}")
set(EXTERNAL_PROJECTS ${EXTERNAL_PROJECTS} ${EXTERNAL_PROJECT})

set(EXTERNAL_PROJECT "libICE")
set(${EXTERNAL_PROJECT}_NAME "libICE-1.0.7")
set(${EXTERNAL_PROJECT}_EXT ".tar.bz2")
set(${EXTERNAL_PROJECT}_FILE "${${EXTERNAL_PROJECT}_NAME}${${EXTERNAL_PROJECT}_EXT}")
set(${EXTERNAL_PROJECT}_URL "http://ftp.x.org/pub/individual/lib/${${EXTERNAL_PROJECT}_FILE}")
set(EXTERNAL_PROJECTS ${EXTERNAL_PROJECTS} ${EXTERNAL_PROJECT})

set(EXTERNAL_PROJECT "libSM")
set(${EXTERNAL_PROJECT}_NAME "libSM-1.2.0")
set(${EXTERNAL_PROJECT}_EXT ".tar.bz2")
set(${EXTERNAL_PROJECT}_FILE "${${EXTERNAL_PROJECT}_NAME}${${EXTERNAL_PROJECT}_EXT}")
set(${EXTERNAL_PROJECT}_URL "http://ftp.x.org/pub/individual/lib/${${EXTERNAL_PROJECT}_FILE}")
set(EXTERNAL_PROJECTS ${EXTERNAL_PROJECTS} ${EXTERNAL_PROJECT})

set(EXTERNAL_PROJECT "libXt")
set(${EXTERNAL_PROJECT}_NAME "libXt-1.0.9")
set(${EXTERNAL_PROJECT}_EXT ".tar.bz2")
set(${EXTERNAL_PROJECT}_FILE "${${EXTERNAL_PROJECT}_NAME}${${EXTERNAL_PROJECT}_EXT}")
set(${EXTERNAL_PROJECT}_URL "http://ftp.x.org/pub/individual/lib/${${EXTERNAL_PROJECT}_FILE}")
set(EXTERNAL_PROJECTS ${EXTERNAL_PROJECTS} ${EXTERNAL_PROJECT})

set(EXTERNAL_PROJECT "libXdamage")
set(${EXTERNAL_PROJECT}_NAME "libXdamage-1.1.3")
set(${EXTERNAL_PROJECT}_EXT ".tar.bz2")
set(${EXTERNAL_PROJECT}_FILE "${${EXTERNAL_PROJECT}_NAME}${${EXTERNAL_PROJECT}_EXT}")
set(${EXTERNAL_PROJECT}_URL "http://ftp.x.org/pub/individual/lib/${${EXTERNAL_PROJECT}_FILE}")
set(EXTERNAL_PROJECTS ${EXTERNAL_PROJECTS} ${EXTERNAL_PROJECT})

set(EXTERNAL_PROJECT "libXfixes")
set(${EXTERNAL_PROJECT}_NAME "libXfixes-4.0.5")
set(${EXTERNAL_PROJECT}_EXT ".tar.bz2")
set(${EXTERNAL_PROJECT}_FILE "${${EXTERNAL_PROJECT}_NAME}${${EXTERNAL_PROJECT}_EXT}")
set(${EXTERNAL_PROJECT}_URL "http://ftp.x.org/pub/individual/lib/${${EXTERNAL_PROJECT}_FILE}")
set(EXTERNAL_PROJECTS ${EXTERNAL_PROJECTS} ${EXTERNAL_PROJECT})

set(EXTERNAL_PROJECT "")
set(${EXTERNAL_PROJECT}_NAME "")
set(${EXTERNAL_PROJECT}_EXT ".tar.bz2")
set(${EXTERNAL_PROJECT}_FILE "${${EXTERNAL_PROJECT}_NAME}${${EXTERNAL_PROJECT}_EXT}")
set(${EXTERNAL_PROJECT}_URL "${${EXTERNAL_PROJECT}_FILE}")
#set(EXTERNAL_PROJECTS ${EXTERNAL_PROJECTS} ${EXTERNAL_PROJECT})

set(EXTERNAL_PROJECT "")
set(${EXTERNAL_PROJECT}_NAME "")
set(${EXTERNAL_PROJECT}_EXT ".tar.bz2")
set(${EXTERNAL_PROJECT}_FILE "${${EXTERNAL_PROJECT}_NAME}${${EXTERNAL_PROJECT}_EXT}")
set(${EXTERNAL_PROJECT}_URL "${${EXTERNAL_PROJECT}_FILE}")
#set(EXTERNAL_PROJECTS ${EXTERNAL_PROJECTS} ${EXTERNAL_PROJECT})

foreach(EXTERNAL_PROJECT ${EXTERNAL_PROJECTS})
	ExternalProject_Add(${EXTERNAL_PROJECT}
		URL ${${EXTERNAL_PROJECT}_URL}
		DOWNLOAD_DIR "download/${EXTERNAL_PROJECT}"
		SOURCE_DIR "source/${EXTERNAL_PROJECT}"
		CONFIGURE_COMMAND "${CMAKE_SOURCE_DIR}/source/${EXTERNAL_PROJECT}/configure" "--prefix=${X11RDP_PREFIX}"
		)
endforeach()

