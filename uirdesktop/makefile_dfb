
# makefile
# directfb

# these are for phillips stb compiling
#-mips3
INCDIR=/home/jay/mediamall/SP5/stb810-SP5/build/staging/usr/local/include/directfb
ROOTFS=/home/jay/mediamall/SP5/stb810-SP5/build/rootfs
CC = mipsel-linux-gnu-gcc

OBJS = tcp.o iso.o mcs.o secure.o rdp.o rdp5.o orders.o \
bitmap.o cache.o mppc.o pstcache.o channels.o licence.o \
ssl_calls.o

UIOBJS = uimain.o bsops.o dfb.o


CFLAGS = -O2 -Wall -I$(INCDIR)
# -DWITH_DEBUG

LDFLAGS = -L$(ROOTFS)/usr/local/lib -L$(ROOTFS)/usr/lib -L$(ROOTFS)/lib

all: rd

rd: $(OBJS) $(UIOBJS)
	$(CC) -o dfbrdesktop $(LDFLAGS) $(OBJS) $(UIOBJS) -ldirectfb -lfusion -ldirect -lz

clean:
	rm -f $(OBJS) $(UIOBJS) dfbrdesktop librdesktop.so

librdesktop.so: $(OBJS) $(UIOBJS)
	$(CC) $(LDFLAGS) -shared -o librdesktop.so $(OBJS) $(UIOBJS) -ldirectfb -lfusion -ldirect -lz
